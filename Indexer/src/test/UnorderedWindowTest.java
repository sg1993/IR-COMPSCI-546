package test;

import java.util.HashMap;
import java.util.Spliterator;

public class UnorderedWindowTest {

    public UnorderedWindowTest() {
        // TODO Auto-generated constructor stub
    }

    private static String textString = "scene ii the same a street enter cressida and alexander cressida who were those went by alexander queen hecuba and helen cressida and whither go they alexander up to the eastern tower whose height command as subject all the vale to see the battle hector whose patience is as a virtue fix d to day was move he chid andromache and struck his armourer and like as there were husbandry in war before the sun rose he was harness d light and to the field go he where every flower did as a prophet weep what it foresaw in hector s wrath cressida what was his cause of anger alexander the noise go this there is among the greece a lord of trojan blood nephew to hector they call him ajax cressida good and what of him alexander they say he is a very man per se and stand alone cressida so do all men unless they are drunk sick or have no leg alexander this man lady hath rob many beast of their particular addition he is as valiant as the lion churlish as the bear slow as the elephant a man into whom nature hath so crowded humour that his valour is crush into folly his folly sauce with discretion there is no man hath a virtue that he hath not a glimpse of nor any man an attaint but he carry some stain of it he is melancholy without cause and merry against the hair he hath the joint of every thing but everything so out of joint that he is a gouty briareu many hand and no use or purblind argu all eyes and no sight cressida but how should this man that make me smile make hector angry alexander they say he yesterday cope hector in the battle and struck him down the disdain and shame whereof hath ever since kept hector fast and waking cressida who come here alexander madam your uncle pandaru enter pandaru cressida hector s a gallant man alexander as may be in the world lady pandaru what s that what s that cressida good morrow uncle pandaru pandaru good morrow cousin cressid what do you talk of good morrow alexander how do you cousin when were you at ilium cressida this morning uncle pandaru what were you talk of when i came was hector armed and gone ere ye came to ilium helen was not up was she cressida hector was gone but helen was not up pandaru even so hector was stirring early cressida that were we talk of and of his anger pandaru was he angry cressida so he say here pandaru true he was so i know the cause too he ll lay about him to day i can tell them that and there s troilu will not come far behind him let them take heed of troilu i can tell them that too cressida what is he angry too pandaru who troilu troilu is the better man of the two cressida o jupiter there s no comparison pandaru what not between troilu and hector do you know a man if you see him cressida ay if i ever saw him before and knew him pandaru well i say troilu is troilu cressida then you say as i say for i am sure he is not hector pandaru no nor hector is not troilu in some degree cressida  tis just to each of them he is himself pandaru himself alas poor troilu i would he were cressida so he is pandaru condition i had gone barefoot to india cressida he is not hector pandaru himself no he s not himself would a were himself well the gods are above time must friend or end well troilu well i would my heart were in her body no hector is not a better man than troilu cressida excuse me pandaru he is elder cressida pardon me pardon me pandaru th other s not come to t you shall tell me another tale when th other s come to t hector shall not have his wit this year cressida he shall not need it if he have his own pandaru nor his quality cressida no matter pandaru nor his beauty cressida  twould not become him his own s better pandaru you have no judgment niece helen herself swore th other day that troilu for a brown favour for so tis i must confess not brown neither cressida no but brown pandaru  faith to say truth brown and not brown cressida to say the truth true and not true pandaru she praise his complexion above paris cressida why paris hath colour enough pandaru so he has cressida then troilu should have too much if she praise him above his complexion is higher than his he have colour enough and the other higher is too flaming a praise for a good complexion i had as lief helen s golden tongue had commend troilu for a copper nose pandaru i swear to you i think helen love him better than paris cressida then she s a merry greece indeed pandaru nay i am sure she do she came to him th other day into the compass window and you know he has not past three or four hair on his chin cressida indeed a tapster s arithmetic may soon bring his particulars therein to a total pandaru why he is very young and yet will he within three pound lift as much as his brother hector cressida is he so young a man and so old a lift pandaru but to prove to you that helen love him she came and put me her white hand to his cloven chin cressida juno have mercy how came it cloven pandaru why you know tis dimple i think his smile become him better than any man in all phrygia cressida o he smile valiantly pandaru do he not cressida o yes an twere a cloud in autumn pandaru why go to then but to prove to you that helen love troilu cressida troilu will stand to the proof if you ll prove it so pandaru troilu why he esteem her no more than i esteem an addle egg cressida if you love an addle egg as well as you love an idle head you would eat chicken i the shell pandaru i cannot choose but laugh to think how she tickle his chin indeed she has a marvellous white hand i must needs confess cressida without the rack pandaru and she take upon her to spy a white hair on his chin cressida alas poor chin many a wart is rich pandaru but there was such laugh queen hecuba laugh that her eyes ran o er cressida with mill stone pandaru and cassandra laugh cressida but there was more temperate fire under the pot of her eyes did her eyes run o er too pandaru and hector laugh cressida at what was all this laugh pandaru marry at the white hair that helen spy on troilu chin cressida an t had been a green hair i should have laugh too pandaru they laugh not so much at the hair as at his pretty answer cressida what was his answer pandaru quoth she here s but two and fifty hair on your chin and one of them is white cressida this is her question pandaru that s true make no question of that two and fifty hair quoth he and one white that white hair is my father and all the rest are his son  jupiter quoth she which of these hair is paris my husband the forked one quoth he pluck t out and give it him but there was such laugh and helen so blush an paris so chafe and all the rest so laugh that it pass cressida so let it now for it has been while go by pandaru well cousin i told you a thing yesterday think on t cressida so i do pandaru i ll be sworn tis true he will weep you an twere a man born in april cressida and i ll spring up in his tear an twere a nettle against may a retreat sound pandaru hark they are coming from the field shall we stand up here and see them as they pass toward ilium good niece do sweet niece cressida cressida at your pleasure pandaru here here here s an excellent place here we may see most brave i ll tell you them all by their name as they pass by but mark troilu above the rest cressida speak not so loud aenea pass pandaru that s aenea is not that a brave man he s one of the flower of troy i can tell you but mark troilu you shall see anon antenor pass cressida who s that pandaru that s antenor he has a shrewd wit i can tell you and he s a man good enough he s one o the soundest judgment in whosoever and a proper man of person when come troilu i ll show you troilu anon if he see me you shall see him nod at me cressida will he give you the nod pandaru you shall see cressida if he do the rich shall have more hector pass pandaru that s hector that that look you that there s a fellow go thy way hector there s a brave man niece o brave hector look how he looks there s a countenance is t not a brave man cressida o a brave man pandaru is a not it do a man s heart good look you what hack are on his helmet look you yonder do you see look you there there s no jesting there s lay on take t off who will as they say there be hack cressida be those with sword pandaru sword any thing he care not an the devil come to him it s all one by god s lid it do one s heart good yonder come paris yonder come paris paris pass look ye yonder niece is t not a gallant man too is t not why this is brave now who said he came hurt home to day he s not hurt why this will do helen s heart good now ha would i could see troilu now you shall see troilu anon helenu pass cressida who s that pandaru that s helenu i marvel where troilu is that s helenu i think he went not forth to day that s helenu cressida can helenu fight uncle pandaru helenu no yes he ll fight indifferent well i marvel where troilu is hark do you not hear the people cry troilu helenu is a priest cressida what sneaking fellow come yonder troilu pass pandaru where yonder that s deiphobu tis troilu there s a man niece hem brave troilu the prince of chivalry cressida peace for shame peace pandaru mark him note him o brave troilu look well upon him niece look you how his sword is bloody and his helm more hack than hector s and how he looks and how he go o admirable youth he ne er saw three and twenty go thy way troilu go thy way had i a sister were a grace or a daughter a goddess he should take his choice o admirable man paris paris is dirt to him and i warrant helen to change would give an eye to boot cressida here come more forces pass pandaru ass fool dolt chaff and bran chaff and bran porridge after meat i could live and die i the eyes of troilu ne er look ne er look the eagle are gone crow and daw crow and daw i had rather be such a man as troilu than agamemnon and all greece cressida there is among the greece achilles a better man than troilu pandaru achilles a drayman a porter a very camel cressida well well pandaru  well well why have you any discretion have you any eyes do you know what a man is is not birth beauty good shape discourse manhood learning gentle virtue youth liberality and such like the spice and salt that season a man cressida ay a mince man and then to be bake with no date in the pie for then the man s date s out pandaru you are such a woman one know not at what ward you lie cressida upon my back to defend my belly upon my wit to defend my wiles upon my secrecy to defend mine honesty my mask to defend my beauty and you to defend all these and at all these ward i lie at a thousand watches pandaru say one of your watches cressida nay i ll watch you for that and that s one of the chiefest of them too if i cannot ward what i would not have hit i can watch you for telling how i took the blow unless it swell past hiding and then it s past watch pandaru you are such another enter troilu s boy boy sir my lord would instantly speak with you pandaru where boy at your own house there he unarm him pandaru good boy tell him i come exit boy i doubt he be hurt fare ye well good niece cressida adieu uncle pandaru i ll be with you niece by and by cressida to bring uncle pandaru ay a token from troilu cressida by the same token you are a bawd exit pandaru words vow gift tear and love s full sacrifice he offer in another s enterprise but more in troilu thousand fold i see than in the glass of pandar s praise may be yet hold i off women are angel woo things won are done joy s soul lie in the do that she beloved know nought that know not this men prize the thing ungain d more than it is that she was never yet that ever knew love got so sweet as when desire did sue therefore this maxim out of love i teach achievement is command ungain d beseech then though my heart s content firm love doth bear nothing of that shall from mine eyes appear exeunt";    
    private static String searchString = "alas poor";

    private static boolean areTwoMapsSame(HashMap<String, Integer> map1,
            HashMap<String, Integer> map2) {
        //System.out.println(map2);
        for (java.util.Map.Entry<String, Integer> e : map1.entrySet()) {
            if (e.getValue() > map2.getOrDefault(e.getKey(), 0))
                return false;
        }
        return true;
    }

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        HashMap<String, Integer> searchMap = new HashMap<String, Integer>();
        String[] search = searchString.split("\\s+");
        int window = 3 * search.length;
        for (int i = 0; i < search.length; i++) {
            searchMap.put(search[i], searchMap.getOrDefault(search[i], 0) + 1);
        }
        System.out.println(searchMap);

        HashMap<String, Integer> textMap = new HashMap<String, Integer>();
        String[] text = textString.split("\\s+");

        try {
            for (int i = 0; i < text.length; i++) {
                int end = i;
                textMap.clear();
                while (end <= i + window - 1) {
                    textMap.put(text[end], textMap.getOrDefault(text[end], 0) + 1);
                    end++;
                }
                i+=1;
                if (areTwoMapsSame(searchMap, textMap)) {
                    System.out.println("Found window from " + i + " to " + end);
                }
            }
        } catch (ArrayIndexOutOfBoundsException e) {

        }

    }

}
